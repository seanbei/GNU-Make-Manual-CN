# 如何创建 `Makefile`

通过前面的介绍，我相信你对 makefile 已经有了一个大概的了解。makefile 就是用来告诉 make 如何通过读取一个数据集来重编译一个系统所包含的全部信息。有点绕啊，那就直接忽略这条定义吧。

## 3.1 `Makefile` 里包含什么

`Makefile` 包含五样东西：显式规则、隐式规则、变量定义、指令符和注释。规则、变量和指令符会在后面的章节中详细描述。
- 显式规则：描述如何生成一个或多个文件（就是前面提到的 `target`）。它列出了 `target` 依赖的其他文件（就是前面提到的 `prerequisite`），以及如果生成这些 `target` 的指令动作（就是前面提到的 `recipe`）。可参考第 `4` 章【如何创建`规则`】。
- 隐式规则：描述如何生成一类文件，这些文件（target）都依赖与其相同名字的文件，以及其 recipe，都是由 make 自动推测的，不用写出来。可参考第 10 章【使用隐式规则】。
- 变量：在一个地方定义一段字符串，然后在其他地方进行替换使用。参见第 2.4 节【如何用变量简化 `makefile`】。
- 指令符：用于 make 处理一些特殊的事情，包括：
    - 在一个 makefile 中读取另一个 makefile 文件，即 include
    - 根据变量的值，来判断是否使用部分 makefile 代码，如 ifeq ifneq 
    - 定义包含多行的字符串变量，如 define 
- 注释：也就是 `#` 号，`#` 号及其后面整一行的内容都会被注释掉，而且，如果行末带了反斜杠 \，那么下一行也会被注释掉。如果 `#` 号后面什么都不加，那就是一个空行。如果你想在 `makefile` 代码中使用 `#` 号，需要在前面加一个反斜杠（即 `\#`），不然会被当成注释符。注释符可以出现在 makefile 中的任何一行上，尽管在某些情况下它们会被特殊处理。


ggggg

## 3.2 给 `makefile` 取名

默认情况下，`make` 会按照以下顺序寻找 `makefile`：`GNUmakefile`、`makefile`、`Makefile`。

正常来说，你应该使用 `makefile` 或者 `Makefile` 这两个名字中的一个。（我们建议采用 `Makefile`，因为它出现在目录列表开头的显著位置，就在其他重要文件，如 `README` 的旁边。）而最先去查找的名字 `GNUmakefile` 反而是最不推荐的，如果你的 `makefile` 是专用于 `GNU make` 的，那可以用这个名字，其他版本的 `make` 是无法识别这个名字的。